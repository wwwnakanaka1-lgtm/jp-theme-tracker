# Plan

Status: COMPLETED
Project: jp-theme-tracker-next
Date: 2026-02-28
Owner: Claude

## Goal
- Full-stack Japanese stock theme tracker with real-time market data (20 themes x 10 stocks)

## Scope
### In
- Theme-based stock tracking with 5 browseable views (home, heatmap, sector heatmap, stock detail, theme detail)
- Background data refresh (APScheduler, 5-min interval)
- Dynamic port allocation for development
- PWA support (offline, installable)
- Security hardening (API key auth, CORS, input validation, path traversal protection)
### Out
- User authentication
- Database persistence (uses precomputed JSON)
- Frontend ESLint configuration

## Current state
- All core features implemented and functional
- 5 frontend routes, 12 components, 2 API routers
- Background scheduler for market data updates
- Dynamic port policy applied to all launch scripts

## Plan (steps)
1. [DONE] Core theme tracker API (FastAPI + yfinance)
2. [DONE] Frontend with Next.js App Router + Tailwind + SWR
3. [DONE] Background data precomputation (APScheduler)
4. [DONE] Dynamic port allocation
5. [DONE] PWA support (service worker, manifest)
6. [DONE] Security hardening (API key, CORS, path traversal protection)

## Files to change
- See IMPLEMENT.md for detailed file listing

## Tests
- Pending: No test coverage yet (deferred to future improvement task)

## Risks / Questions
- yfinance API rate limiting may affect data freshness
- No test coverage increases regression risk

## Auto Requirements (Generated by spec-drift-guard)

<!-- SDG:AUTO-REQ:START -->
- REQ-001: backend に関する機能を実装し、検証できる状態にする。
- REQ-002: themes に関する機能を実装し、検証できる状態にする。
- REQ-003: update data に関する機能を実装し、検証できる状態にする。
- REQ-004: StockChart に関する機能を実装し、検証できる状態にする。
- REQ-005: themes に関する機能を実装し、検証できる状態にする。
- REQ-006: workbox bb54ffba に関する機能を実装し、検証できる状態にする。
- REQ-007: SlideMenu に関する機能を実装し、検証できる状態にする。
- REQ-008: TradingChart に関する機能を実装し、検証できる状態にする。
- REQ-009: api に関する機能を実装し、検証できる状態にする。
- REQ-010: stocks に関する機能を実装し、検証できる状態にする。
- REQ-011: calculator に関する機能を実装し、検証できる状態にする。
- REQ-012: data fetcher に関する機能を実装し、検証できる状態にする。
<!-- SDG:AUTO-REQ:END -->
